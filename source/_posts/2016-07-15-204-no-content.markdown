---
layout: post
title: "204 No Content"
date: 2016-07-15 19:56:11 -0700
comments: true
categories: Laravel, PHP, Symfony
---

Response codes such ass 200, 404, 500 are very common response codes. Each code has their own meanings and so of course make sure you use them correctly.

I just discovered a case where our API wasn't returning a JSON and the Mule app started to throw exception when it called the API.  

What happens is:

```php
return Response::json(['data' => [], 'message' => 'Uh oh'], 204);
```

is considered as an empty response due to [Symfony\Component\HttpFoundation\Response](https://github.com/symfony/symfony/blob/c53cb57b9ddb0e97c3596772d4b4a66c0db14091/src/Symfony/Component/HttpFoundation/Response.php#L267-L270) treating code 204 as empty

```php
    public function prepare(Request $request)
    {
        $headers = $this->headers;

        if ($this->isInformational() || $this->isEmpty()) {
            $this->setContent(null);
            $headers->remove('Content-Type');
            $headers->remove('Content-Length');
            //....

        }
        //....
    }

    //...

    /**
     * Is the response empty?
     *
     * @return bool
     */
    public function isEmpty()
    {
        return in_array($this->statusCode, array(204, 304));
    }
```
